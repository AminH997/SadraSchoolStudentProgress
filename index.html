<!doctype html>
<html lang="fa" dir="rtl">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Welcome â€” Student Progress Video</title>
  <meta name="description" content="Parents enter a student code to watch a short progress video. Simple, mobile-friendly, one page." />
  <style>
    :root{--accent:#2563eb;--bg:#f7f9fc;--card:#ffffff;--muted:#6b7280;--err:#ef4444}
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;min-height:100vh;display:flex;align-items:center;justify-content:center;background:var(--bg);padding:18px;color:#0f172a;font-family:Vazirmatn, system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif}

    .card{width:100%;max-width:760px;background:var(--card);border-radius:14px;box-shadow:0 10px 30px rgba(2,6,23,0.08);padding:24px}

    /* welcome */
    .welcome{text-align:center;display:flex;flex-direction:column;gap:10px}
    .welcome h1{margin:0;font-size:1.6rem}
    .welcome p{margin:0;color:var(--muted);font-size:1rem}

    /* code input */
    .code-box{margin-top:18px;display:flex;gap:10px;justify-content:center;flex-wrap:wrap}
    input[type="text"]{padding:14px 16px;font-size:1.05rem;border-radius:10px;border:1px solid #e5e7eb;min-width:220px}
    button.primary{padding:14px 18px;font-size:1.05rem;border-radius:10px;border:0;background:var(--accent);color:white;font-weight:700;cursor:pointer}

    /* override for numeric code input: left-to-right inside RTL page */
    #codeInput{direction:ltr;text-align:left;letter-spacing:1px}

    /* error box */
    #errorBox{display:none;margin-top:12px;border-radius:10px;padding:12px;background:rgba(239,68,68,0.08);color:var(--err);border:1px solid rgba(239,68,68,0.18);text-align:center}

    /* player */
    .player-wrap{margin-top:22px;display:none;flex-direction:column;gap:10px}
    .video-box{background:#000;border-radius:12px;overflow:hidden;position:relative}
    video{width:100%;display:block;background:#000}

    /* simple controls */
    .controls{display:flex;align-items:center;gap:10px;padding:10px}
    .play{width:44px;height:44px;border-radius:8px;border:0;background:var(--accent);color:white;font-weight:800;font-size:16px;cursor:pointer;display:flex;align-items:center;justify-content:center}
    .bar-wrap{flex:1;height:10px;background:rgba(2,6,23,0.08);border-radius:8px;cursor:pointer;position:relative}
    .bar{position:absolute;left:0;top:0;bottom:0;width:0%;background:var(--accent);border-radius:8px}
    .time{font-family:monospace;font-size:0.95rem;color:var(--muted);min-width:80px;text-align:center}

    /* end screen */
    .end{position:absolute;inset:0;background:rgba(2,6,23,0.55);color:white;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:10px;text-align:center;padding:20px}
    .end.hidden{display:none}
    .end button{padding:10px 16px;border-radius:8px;border:0;background:white;color:#0f172a;font-weight:700;cursor:pointer}

    footer{margin-top:16px;text-align:center;color:var(--muted);font-size:0.9rem}

    /* slight spacing for fullscreen button on small screens */
    @media (max-width:520px){
      .time{min-width:60px;font-size:0.9rem}
      .play{width:48px;height:48px}
    }

    .contact-footer{
    margin-top:20px;
    padding-top:14px;
    border-top:1px solid #e5e7eb;
    text-align:center;
  }

  .contact-text{
    color:var(--muted);
    font-size:0.95rem;
    margin-bottom:10px;
  }

  .contact-links{
    display:flex;
    justify-content:center;
    gap:12px;
    align-items:center;
  }

  .contact-links a{
  width:52px;
  height:52px;
  display:flex;
  align-items:center;
  justify-content:center;
  border-radius:12px;
  background:#f8fafc;
  text-decoration:none;
}

.contact-links img{
  width:48px;
  height:48px;
  object-fit:contain;   /* THIS is the magic */
  display:block;
}
    /* school logo: keep aspect ratio (3:4), responsive and centered */
.logo-wrap{display:flex;justify-content:center;margin-bottom:12px}
.school-logo{
  display:block;
  width:auto;
  max-height:160px;    /* desktop/touch-friendly height */
  max-width:55%;       /* prevents it from being huge on wide screens */
  object-fit:contain;
}

/* slightly smaller on very small screens */
@media (max-width:420px){
  .school-logo{ max-height:120px; max-width:72%; }
}


  </style>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body>
  <main class="card">
    <!-- school logo (3:4 portrait) -->
<div class="logo-wrap" aria-hidden="false">
  <img src="icons/sadra-logo.png" alt="Ù„ÙˆÚ¯ÙˆÛŒ Ù…Ø¯Ø±Ø³Ù‡ ØµØ¯Ø±Ø§" class="school-logo">
</div>

    <!-- WELCOME -->
    <section class="welcome">
      <h1>Ø³Ù„Ø§Ù… â€” Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯ ğŸ‘‹</h1>
      <p>ğŸ‘‡ Ù„Ø·ÙØ§Ù‹ Ú©Ø¯ Ù…Ù„ÛŒ ÙØ±Ø²Ù†Ø¯ØªØ§Ù† Ø±Ø§ Ø¯Ù‚ÛŒÙ‚ Ùˆ Ø¨Ø§ Ø§Ø±Ù‚Ø§Ù… Ø§Ù†Ú¯Ù„ÛŒØ³ÛŒ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯ (Û±Û° Ø±Ù‚Ù…)</p>
    </section>

    <!-- CODE INPUT -->
    <section class="code-box">
      <input id="codeInput" type="text" placeholder="Ú©Ø¯ Ù…Ù„ÛŒ (Ù…Ø«Ø§Ù„: 0123456789)" autocomplete="off" inputmode="numeric" maxlength="10" aria-label="Ú©Ø¯ Ù…Ù„ÛŒ" />
      <button id="seeBtn" class="primary">Ù…Ø´Ø§Ù‡Ø¯Ù‡ ÙˆÛŒØ¯ÛŒÙˆ</button>
    </section>

    <div id="errorBox" role="alert" aria-live="assertive"></div>

    <!-- PLAYER -->
    <section id="playerWrap" class="player-wrap">
      <div class="video-box">
        <video id="video" preload="metadata" playsinline webkit-playsinline></video>

        <div id="endScreen" class="end hidden">
          <div style="font-size:1.2rem;font-weight:800">Ø§Ø² ØªÙ…Ø§Ø´Ø§ÛŒ ÙˆÛŒØ¯ÛŒÙˆ Ù…ØªØ´Ú©Ø±Ù… ğŸ™</div>
          <div style="font-size:1rem">Ø¨Ø±Ø§ÛŒ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù…Ø¬Ø¯Ø¯ØŒ Ø¯Ú©Ù…Ù‡ ØªÚ©Ø±Ø§Ø± Ø±Ø§ Ø¨Ø²Ù†ÛŒØ¯.</div>
          <button id="replayBtn">ØªÚ©Ø±Ø§Ø±</button>
          <div style="margin-top:6px;font-weight:700">Ø´Ù…Ø§Ø±Ù‡ ØªÙ…Ø§Ø³ Ù…Ù† : <br>09373722155</div>
        </div>
      </div>

      <div class="controls">
        <button id="playBtn" class="play" aria-label="Ù¾Ø®Ø´">â–º</button>
        <div id="barWrap" class="bar-wrap"><div id="bar" class="bar"></div></div>
        <div id="time" class="time">0:00 / 0:00</div>
        <!-- fullscreen button -->
        <button id="fsBtn" class="play" aria-label="ØªÙ…Ø§Ù… ØµÙØ­Ù‡">â›¶</button>
      </div>
    </section>

    <footer class="contact-footer">
        <div class="contact-text">
          Ø¯Ø± ØµÙˆØ±Øª Ø¯Ø§Ø´ØªÙ† Ù‡Ø±Ú¯ÙˆÙ†Ù‡ Ø³Ø¤Ø§Ù„ØŒ Ø®ÙˆØ´Ø­Ø§Ù„ Ù…ÛŒâ€ŒØ´ÙˆÙ… Ø¯Ø± ØªÙ…Ø§Ø³ Ø¨Ø§Ø´ÛŒØ¯:
        </div>
      
        <div class="contact-links">
          <!-- Phone -->
          <a href="tel:+989373722155" aria-label="ØªÙ…Ø§Ø³ ØªÙ„ÙÙ†ÛŒ">
            <span class="phone-icon">ğŸ“</span>
          </a>
      
          <!-- WhatsApp -->
          <a href="https://wa.me/0989373722155" target="_blank" rel="noopener" aria-label="ÙˆØ§ØªØ³Ø§Ù¾">
            <img src="icons/whatsapp.svg" alt="WhatsApp">
          </a>
      
          <!-- Eitaa -->
          <a href="https://eitaa.com/@Yes_thats_my_username" target="_blank" rel="noopener" aria-label="Ø§ÛŒØªØ§">
            <img src="icons/eitaa.svg" alt="Eitaa">
          </a>
        </div>
      </footer>
      
      
      
  </main>

  <script>
    // ===== CONFIG =====
    // Use numeric strings as keys (10-digit national IDs). Update to match your filenames.
    const videos = {
        '1747117536': 'videos/MohammadRezaShirvani.mp4',
        '1747194301': 'videos/AhmadNaseri.mp4',
        '1747347817': 'videos/AlirezaMardasi.mp4',
        '1747246621': 'videos/AlirezaMaskooli.mp4',
        '1747149391': 'videos/AmirAliMemar.mp4',
        '1747215201': 'videos/AradHajiPoor.mp4',
        '1747277630': 'videos/DanialHamidiNeek.mp4',
        '1747049530': 'videos/EliyasJamee.mp4',
        '1747056332': 'videos/HaniBaniNemeh.mp4',
        '1747287903': 'videos/MiladEbadi.mp4',
        '7490000556': 'videos/MohammadAminAtabi.mp4',
        '1747021369': 'videos/MohammadAminHamidZoeri.mp4',
        '1747126233': 'videos/MohammadEhsanAliMohammadi.mp4',
        '1747232580': 'videos/MohammadHadiHamidavi.mp4',
        '1747065242': 'videos/MohammadHasanBadvi.mp4',
        '1747132391': 'videos/MohammadHasanRahooli.mp4',
        '1747166995': 'videos/MohammadHasanSaediZade.mp4',
        '0374451133': 'videos/MohammadHossienAmiriFard.mp4',
        '7490000149': 'videos/MohammadHossienChaabi.mp4',
        '1747317020': 'videos/MohammadJavadMohammadZade.mp4',
        '1747283576': 'videos/MohammadMokhtarMoosavi.mp4',
        '1746989981': 'videos/MohammadTahaEbadi.mp4',
        '1747166480': 'videos/MohammadTahaHamidavi.mp4',
        '1747083038': 'videos/MohammadTahaSheheitat.mp4',
        '1747315206': 'videos/MortezaHamidi.mp4',
        '1747140406': 'videos/MostafaHamidiNeek.mp4',
        '1747113018': 'videos/MostafaZoeri.mp4',
        '1747327395': 'videos/SamyarMohammadZade.mp4',
        '1747166571': 'videos/TahaMoosavi.mp4'
    };

    const PHONE = '+98 937 3722155';
    const CODE_LENGTH = 10; // require exactly 10 digits
    // ==================

    const codeInput = document.getElementById('codeInput');
    const seeBtn = document.getElementById('seeBtn');
    const playerWrap = document.getElementById('playerWrap');
    const video = document.getElementById('video');
    const playBtn = document.getElementById('playBtn');
    const barWrap = document.getElementById('barWrap');
    const bar = document.getElementById('bar');
    const time = document.getElementById('time');
    const endScreen = document.getElementById('endScreen');
    const replayBtn = document.getElementById('replayBtn');
    const errorBox = document.getElementById('errorBox');
    const fsBtn = document.getElementById('fsBtn');

    // show error in Persian; pre-defined messages
    function showError(key){
      let msg = '';
      if(key === 'empty') msg = 'Ù„Ø·ÙØ§Ù‹ Ú©Ø¯ Ù…Ù„ÛŒ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯.';
      else if(key === 'digits') msg = 'Ú©Ø¯ Ø¨Ø§ÛŒØ¯ ÙÙ‚Ø· Ø´Ø§Ù…Ù„ Ø§Ø±Ù‚Ø§Ù… Ø¨Ø§Ø´Ø¯ (0-9).';
      else if(key === 'length') msg = `Ú©Ø¯ Ø¨Ø§ÛŒØ¯ Ø¯Ù‚ÛŒÙ‚Ø§Ù‹ ${CODE_LENGTH} Ø±Ù‚Ù… Ø¨Ø§Ø´Ø¯.`;
      else if(key === 'notfound') msg = 'Ø§ÛŒÙ† Ú©Ø¯ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡ Ø§Ø³ØªØŒ Ø§Ø² Ø´Ø§Ù…Ù„ Ø¨ÙˆØ¯Ù† ÙØ±Ø²Ù†Ø¯Ø§Ù† Ø¯Ø± Ù„ÛŒØ³Øª Ø§Ø·Ù…ÛŒÙ†Ø§Ù† Ø­Ø§ØµÙ„ ÙØ±Ù…Ø§ÛŒÛŒØ¯ Ùˆ ÛŒØ§ Ú©Ø¯ Ø±Ø§ Ø¯ÙˆØ¨Ø§Ø±Ù‡ Ú†Ú© Ú©Ù†ÛŒØ¯';
      else msg = 'Ø®Ø·Ø§. Ù„Ø·ÙØ§Ù‹ Ø¯ÙˆØ¨Ø§Ø±Ù‡ ØªÙ„Ø§Ø´ Ú©Ù†ÛŒØ¯.';

      errorBox.textContent = msg;
      errorBox.style.display = 'block';
      // subtle focus for screen readers
      errorBox.focus && errorBox.focus();
    }

    function clearError(){
      errorBox.textContent = '';
      errorBox.style.display = 'none';
    }

    // strip non-digit characters as user types (helps when pasting)
    codeInput.addEventListener('input', ()=>{
      const cleaned = codeInput.value.replace(/[^0-9]/g, '');
      if(codeInput.value !== cleaned) codeInput.value = cleaned;
      // enforce maxlength just in case
      if(codeInput.value.length > CODE_LENGTH) codeInput.value = codeInput.value.slice(0, CODE_LENGTH);
      clearError();
    });

    function validateCode(raw){
      const code = (raw||'').trim();
      if(!code) return 'empty';
      if(!/^[0-9]+$/.test(code)) return 'digits';
      if(code.length !== CODE_LENGTH) return 'length';
      return null;
    }

    function loadVideo(){
      clearError();
      const code = codeInput.value.trim();
      const invalid = validateCode(code);
      if(invalid){ showError(invalid); return; }

      const src = videos[code];
      if(!src){ showError('notfound'); return; }

      // success: load video
      video.src = src;
      video.load();
      playerWrap.style.display = 'flex';
      endScreen.classList.add('hidden');

      // put focus to video for accessibility
      setTimeout(()=> video.focus && video.focus(), 300);

      // try to play
      video.play().catch(()=>{});

      // remember last code
      try{ localStorage.setItem('lastCode', code); }catch(e){}
    }

    seeBtn.addEventListener('click', loadVideo);
    codeInput.addEventListener('keydown', e=>{ if(e.key==='Enter') loadVideo(); });

    // restore last code if available
    try{ const last = localStorage.getItem('lastCode'); if(last) codeInput.value = last; }catch(e){}

    // player controls
    playBtn.addEventListener('click', ()=>{ if(video.paused) video.play(); else video.pause(); });
    video.addEventListener('play', ()=> playBtn.textContent='âšâš');
    video.addEventListener('pause', ()=> playBtn.textContent='â–º');

    function formatTime(s){ if(!isFinite(s)) return '0:00'; s=Math.floor(s); const m=Math.floor(s/60); const r=s%60; return m+':' + (r<10?'0':'')+r; }
    video.addEventListener('timeupdate', ()=>{ const p = (video.currentTime / video.duration) * 100 || 0; bar.style.width = p + '%'; time.textContent = `${formatTime(video.currentTime)} / ${formatTime(video.duration)}`; });

    barWrap.addEventListener('click', e=>{ const r = barWrap.getBoundingClientRect(); const x = e.clientX - r.left; const pct = Math.min(Math.max(x/r.width,0),1); if(isFinite(video.duration)) video.currentTime = pct * video.duration; });

    video.addEventListener('ended', ()=>{ endScreen.classList.remove('hidden'); });
    replayBtn.addEventListener('click', ()=>{ endScreen.classList.add('hidden'); video.currentTime = 0; video.play(); });

    // ---------- Fullscreen control ----------
    function updateFsButton(){
      // show 'â›¶' when not fullscreen, 'âœ•' when in fullscreen
      try{
        const isFs = !!(document.fullscreenElement || document.webkitFullscreenElement || document.webkitIsFullScreen);
        fsBtn.textContent = isFs ? 'âœ•' : 'â›¶';
      }catch(e){
        fsBtn.textContent = 'â›¶';
      }
    }

    fsBtn.addEventListener('click', () => {
      // If currently fullscreen, exit
      if (document.fullscreenElement || document.webkitFullscreenElement) {
        if (document.exitFullscreen) document.exitFullscreen().catch(()=>{});
        else if (document.webkitExitFullscreen) document.webkitExitFullscreen && document.webkitExitFullscreen();
      } else {
        // Request fullscreen on the video element (best for mobile)
        if (video.requestFullscreen) {
          video.requestFullscreen().catch(()=>{});
        } else if (video.webkitEnterFullscreen) {
          // iOS Safari specific fullscreen for video
          try { video.webkitEnterFullscreen(); } catch(e) {}
        } else if (video.webkitRequestFullScreen) {
          video.webkitRequestFullScreen && video.webkitRequestFullScreen();
        }
      }
    });

    // update button when fullscreen state changes
    document.addEventListener('fullscreenchange', updateFsButton);
    document.addEventListener('webkitfullscreenchange', updateFsButton);
    document.addEventListener('MSFullscreenChange', updateFsButton);

    // initial button state
    updateFsButton();
    // ----------------------------------------

  </script>
</body>
</html>
